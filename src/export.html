<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>設定エクスポート - Claude Code Notify</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+1+Code:wght@400;600&family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="export.css">
    <script type="module" src="/export.js" defer></script>
</head>
<body>
    <div class="pixel-grid"></div>

    <main class="export-container">
        <header class="export-header">
            <div class="icon-wrapper">
                <div class="pixel-icon">
                    <span class="exclaim">!</span>
                </div>
            </div>
            <h1>設定エクスポート</h1>
            <p class="subtitle">Claude Code Notify</p>
        </header>

        <section class="config-section">
            <div class="section-header">
                <span class="pixel-marker"></span>
                <h2>接続設定</h2>
            </div>

            <div class="form-group">
                <label for="host">
                    <span class="label-icon">▶</span>
                    Windows PCのIPアドレス
                </label>
                <div class="input-with-button">
                    <input type="text" id="host" placeholder="192.168.x.x">
                    <button type="button" id="detect-ip" class="btn-secondary">
                        <span class="btn-text">自動検出</span>
                        <span class="btn-icon">⟳</span>
                    </button>
                </div>
                <small class="hint">Claude Code側からアクセスできるIPアドレス</small>
                <div id="ip-status" class="ip-status hidden"></div>
            </div>

        </section>

        <section class="config-section">
            <div class="section-header">
                <span class="pixel-marker"></span>
                <h2>プラットフォーム選択</h2>
            </div>
            <p class="platform-hint">
                Claude Codeを実行している環境を選択してください
            </p>
        </section>

        <div class="actions">
            <div class="platform-buttons">
                <button type="button" id="export-linux-btn" class="btn-primary btn-linux">
                    <span class="btn-content">
                        <span class="export-icon">🐧</span>
                        Linux / WSL 用
                    </span>
                </button>
                <button type="button" id="export-windows-btn" class="btn-primary btn-windows">
                    <span class="btn-content">
                        <span class="export-icon">🪟</span>
                        Windows 用
                    </span>
                </button>
            </div>
            <p class="platform-description">
                <strong>Linux / WSL:</strong> mosquitto_pub + jq が必要<br>
                <strong>Windows:</strong> 追加インストール不要（mqtt-publish.exe同梱）
            </p>
        </div>

        <div id="status" class="status hidden"></div>

        <footer class="export-footer">
            <div class="pixel-line"></div>
            <div class="footer-nav">
                <a href="index.html" class="back-link">← ダッシュボードに戻る</a>
                <span class="footer-info">MQTT Port: 1883</span>
            </div>
        </footer>
    </main>
</body>
</html>
